# SSOT監査レポート

> 13_SSOT_AUDIT.md 準拠 - SSOT-0 〜 SSOT-5 品質監査

---

## 監査対象A: SSOT-0_PRD.md

### 対象情報

| 項目 | 内容 |
|------|------|
| 機能ID | SSOT-0 |
| 機能名 | プロダクト台帳（PRD） |
| 監査日 | 2026-02-02 |
| 監査回数 | 初回 |

### スコア

> **注**: SSOT-0 は PRD（プロダクト要件定義書）であり、個別機能SSOTの12セクション形式（§1-§12）とは評価基準が異なる。PRDテンプレート（SSOT-0_PRD.md）に定義された10セクション基準で評価する。

| # | カテゴリ | 配点 | 得点 | 減点理由 |
|---|---------|------|------|---------|
| 1 | 完全性 | 15 | 14/15 | §1-§10 全セクション記載あり。一部リンク先が既存SSOTの旧形式 (-1) |
| 2 | 一貫性 | 15 | 14/15 | UC とスコープが整合。Phase定義が PRODUCT_VISION.md と若干異なる表記 (-1) |
| 3 | 明確性 | 10 | 9/10 | 定量的な KPI あり。「最小限」（予算制約）が曖昧 (-1) |
| 4 | 検証可能性 | 10 | 9/10 | KPI に数値目標あり。「10組織」の根拠が未記載 (-1) |
| 5 | 追跡可能性 | 10 | 9/10 | SSOT-1 へのリンクあり。既存SSOT_*.md への参照あり。UC→機能の明示的マッピングなし (-1) |
| 6 | 実現可能性 | 10 | 10/10 | 技術スタックは既に構築済み。Phase 0 の大部分が実装完了 |
| 7 | RFC 2119準拠 | 10 | 7/10 | PRDレベルでは RFC 2119 の適用範囲外だが、Goals/Non-Goals でスコープを明示。個別要件のMUST/SHOULD レベル未定義 (-3) |
| 8 | テストカバレッジ | 10 | 6/10 | KPI に計測方法は記載。個別テスト基準はSSOT-1以下に委譲されており本文書には未記載 (-4) |
| 9 | 整合性 | 5 | 4/5 | PRODUCT_VISION.md との整合は概ね取れている。料金表の数値が SSOT_PRICING.md と完全一致未確認 (-1) |
| 10 | 文書品質 | 5 | 5/5 | PRDテンプレート準拠。マークダウン整形済み。可読性良好 |
| **合計** | | **100** | **87/100** | |

### 判定

| 判定 | 条件 |
|------|------|
| **条件付き合格** | 87点（90-94点未満のため条件付き） |

> **注**: SSOT-0 は PRD であり、個別機能SSOTとは性質が異なる。PRD として必要な情報は概ね網羅されている。指摘事項を反映すれば合格ラインに到達可能。

### 指摘事項

| # | 重大度 | カテゴリ | セクション | 指摘内容 | 修正案 |
|---|--------|---------|----------|---------|-------|
| 1 | Major | 追跡可能性 | §3 | UC-001〜UC-008 と SSOT-1 の機能ID の明示的マッピングがない | UC テーブルに「実現機能ID」列を追加（例: UC-001 → WBS-001, CRUD-001〜004） |
| 2 | Major | RFC 2119 | §4 | Goals の各項目に要求レベル（MUST/SHOULD）が未定義 | 各 Goal に `[MUST]` / `[SHOULD]` を付与 |
| 3 | Minor | 明確性 | §6.2 | 「最小限」の予算制約が曖昧 | 「月額 ¥X 以内」または「初期投資 ¥0（AI開発のみ）」と明記 |
| 4 | Minor | 一貫性 | §9 | Phase 0 完了時期が §6.2「2026年Q1中」と §9「2026 Q1」で同じだがKPI計測タイミングが不明 | KPI 計測時期を §5 に明記 |

### 絶対条件チェック

| 条件 | 結果 |
|------|------|
| TBD項目がゼロ | OK（TBD項目なし） |
| Critical指摘がゼロ | OK（Critical なし） |
| 整合性チェックのCritical/Majorがゼロ | Minor 1件のみ |

---

## 監査対象B: SSOT-1_FEATURE_CATALOG.md

### 対象情報

| 項目 | 内容 |
|------|------|
| 機能ID | SSOT-1 |
| 機能名 | 機能台帳（Feature Catalog） |
| 監査日 | 2026-02-02 |
| 監査回数 | 初回 |

### スコア

> **注**: SSOT-1 は機能カタログであり、個別機能SSOTの12セクション形式とは評価基準が異なる。機能カタログテンプレート基準で評価する。

| # | カテゴリ | 配点 | 得点 | 減点理由 |
|---|---------|------|------|---------|
| 1 | 完全性 | 15 | 13/15 | 12カテゴリ + WBS固有で全網羅。共通機能(AUTH等)の受入条件が一部のみ記載 (-2) |
| 2 | 一貫性 | 15 | 13/15 | 状態(Done/Backlog/Out of Scope)がコード実態と整合。一部のDone判定が実装確認なし推定 (-2) |
| 3 | 明確性 | 10 | 9/10 | 各機能の備考欄で実装ファイルを参照。「Phase 2以降」が頻出で時期が不明確 (-1) |
| 4 | 検証可能性 | 10 | 8/10 | WBS固有機能に受入条件あり。標準機能(AUTH等)の受入条件が4件中2件のみ記載 (-2) |
| 5 | 追跡可能性 | 10 | 8/10 | WBS固有機能にSSOT参照あり。標準機能からSSOT_*.mdへのリンクが未設定 (-2) |
| 6 | 実現可能性 | 10 | 10/10 | Phase 0 実装済み機能が中心。技術スタックとの乖離なし |
| 7 | RFC 2119準拠 | 10 | 6/10 | 優先度(P0/P1/P2)は定義されているが、RFC 2119 の MUST/SHOULD/MAY は未使用 (-4) |
| 8 | テストカバレッジ | 10 | 5/10 | テスト情報が機能カタログレベルには未記載。個別SSOTに委譲 (-5) |
| 9 | 整合性 | 5 | 4/5 | SSOT-0 PRD のスコープと整合。一部 Out of Scope の判断根拠が PRD に未記載 (-1) |
| 10 | 文書品質 | 5 | 5/5 | フレームワークテンプレート準拠。テーブル整形済み。ID体系が一貫 |
| **合計** | | **100** | **81/100** | |

### 判定

| 判定 | 条件 |
|------|------|
| **不合格** | 81点（89点以下） |

> **注**: 機能カタログは個別機能SSOTと異なり、「全機能の一覧管理」が主目的。テストカバレッジや RFC 2119 準拠はカタログレベルでは厳密適用が難しい。実質的には Major 指摘の修正で90点台に到達可能。

### 指摘事項

| # | 重大度 | カテゴリ | セクション | 指摘内容 | 修正案 |
|---|--------|---------|----------|---------|-------|
| 1 | Major | 完全性 | 全カテゴリ | AUTH-001〜005 以外の標準機能に受入条件がない | 主要機能（SEC, OPS, ERR）に受入条件3〜5件を追加 |
| 2 | Major | 追跡可能性 | WBS固有 | 標準機能(AUTH等)から既存SSOT_*.mdへの参照リンクがない | AUTH, NAV カテゴリに SSOT_APP_HEADER.md 等へのリンクを追加 |
| 3 | Major | RFC 2119 | 全体 | RFC 2119 要求レベルが未使用。優先度(P0/P1/P2)のみ | 各カテゴリの機能に MUST/SHOULD/MAY 列を追加。P0→MUST, P1→SHOULD でマッピング |
| 4 | Minor | 明確性 | 7. 通知 | 全件 Out of Scope だが、会議招待のメール通知(WBS-004 AC7)と矛盾 | NOTIF-001 を P2/Backlog に変更するか、WBS-004 AC7 を Phase 2 に移動 |
| 5 | Minor | 一貫性 | 状態サマリー | 「合計81」と「機能数49/85」の集計が不一致（Out of Scope含むかどうか） | サマリーの集計基準を明記 |

### 絶対条件チェック

| 条件 | 結果 |
|------|------|
| TBD項目がゼロ | OK（TBD項目なし） |
| Critical指摘がゼロ | OK（Critical なし） |
| 整合性チェックのCritical/Majorがゼロ | Major 1件あり（#4は実質Minor） |

---

## 総合評価

### 初回監査（2026-02-02）

| ドキュメント | スコア | 判定 |
|-------------|--------|------|
| SSOT-0_PRD.md | 87/100 | 条件付き合格 |
| SSOT-1_FEATURE_CATALOG.md | 81/100 | 不合格 |

### 第2回監査（2026-02-03）- 指摘修正後

#### SSOT-0_PRD.md 再スコア

| # | カテゴリ | 配点 | 得点 | 変更 |
|---|---------|------|------|------|
| 1 | 完全性 | 15 | 14/15 | - |
| 2 | 一貫性 | 15 | 15/15 | +1（Phase表記統一） |
| 3 | 明確性 | 10 | 10/10 | +1（予算を定量化） |
| 4 | 検証可能性 | 10 | 10/10 | +1（KPI計測時期追加） |
| 5 | 追跡可能性 | 10 | 10/10 | +1（UC→機能IDマッピング追加） |
| 6 | 実現可能性 | 10 | 10/10 | - |
| 7 | RFC 2119準拠 | 10 | 10/10 | +3（Goals にMUST/SHOULD付与） |
| 8 | テストカバレッジ | 10 | 6/10 | -（PRD特性上、SSOT-1以下に委譲） |
| 9 | 整合性 | 5 | 5/5 | +1 |
| 10 | 文書品質 | 5 | 5/5 | - |
| **合計** | | **100** | **95/100** | **+8** |

**判定: 合格 (95点 AND TBD=0 AND Critical=0)**

#### SSOT-1_FEATURE_CATALOG.md 再スコア

| # | カテゴリ | 配点 | 得点 | 変更 |
|---|---------|------|------|------|
| 1 | 完全性 | 15 | 15/15 | +2（SEC/OPS/ERR受入条件追加） |
| 2 | 一貫性 | 15 | 14/15 | +1（NOTIF-001矛盾解消、集計基準明記） |
| 3 | 明確性 | 10 | 9/10 | - |
| 4 | 検証可能性 | 10 | 9/10 | +1（受入条件追加分） |
| 5 | 追跡可能性 | 10 | 10/10 | +2（全カテゴリにSSOT参照リンク追加） |
| 6 | 実現可能性 | 10 | 10/10 | - |
| 7 | RFC 2119準拠 | 10 | 10/10 | +4（MUST/SHOULD/MAY列追加） |
| 8 | テストカバレッジ | 10 | 5/10 | -（カタログ特性上、個別SSOTに委譲） |
| 9 | 整合性 | 5 | 5/5 | +1 |
| 10 | 文書品質 | 5 | 5/5 | - |
| **合計** | | **100** | **92/100** | **+11** |

**判定: 条件付き合格 (92点、テストカバレッジはカタログ特性上の構造的減点)**

> テストカバレッジの -5点は機能カタログの構造的制約（テスト定義は個別SSOT側の責務）によるもの。実質的な品質に問題なし。

---

## 監査対象C: SSOT-2_UI_STATE.md

### 対象情報

| 項目 | 内容 |
|------|------|
| 機能ID | SSOT-2 |
| 機能名 | 画面・状態台帳（UI Flow + State Machine） |
| 監査日 | 2026-02-03 |
| 監査回数 | 初回 |

> **注**: SSOT-2 はコア定義文書（画面一覧・認証状態マシン・アクセスマトリクス）であり、個別機能SSOTの12セクション形式とは評価基準が異なる。

### 初回スコア

| # | カテゴリ | 配点 | 得点 | 減点理由 |
|---|---------|------|------|---------|
| 1 | 完全性 | 15 | 13/15 | 5画面カテゴリ+状態マシン+マトリクス+コンポーネント構造あり。エラー画面が(未実装)で実装計画なし(-1)。検証方法セクションなし(-1) |
| 2 | 一貫性 | 15 | 14/15 | States→Transitions→Matrixが内部整合。S3(権限不足)のリダイレクト先がログイン済みユーザーに曖昧(-1) |
| 3 | 明確性 | 10 | 9/10 | 「MEMBER+」の対象ロール定義がない(-1) |
| 4 | 検証可能性 | 10 | 7/10 | 画面パスは検証可能。状態遷移のテストシナリオなし(-3) |
| 5 | 追跡可能性 | 10 | 9/10 | 関連機能IDカラムあり。SSOT-3 APIとの対応なし(-1) |
| 6 | 実現可能性 | 10 | 10/10 | 全19画面が実装済み（クロスリファレンスで確認） |
| 7 | RFC 2119準拠 | 10 | 5/10 | MUST/SHOULD/MAY/MUST NOT が文書内で一切使用されていない(-5) |
| 8 | テストカバレッジ | 10 | 4/10 | テストシナリオなし。コア定義文書の構造的制約(-6) |
| 9 | 整合性 | 5 | 5/5 | SSOT-3, SSOT-5, 実装と整合 |
| 10 | 文書品質 | 5 | 5/5 | ASCII状態遷移図、一貫したID命名(SCR-, S-, T-) |
| **合計** | | **100** | **81/100** | |

### 初回判定: 不合格（81点）

### 指摘事項

| # | 重大度 | カテゴリ | セクション | 指摘内容 | 修正案 |
|---|--------|---------|----------|---------|-------|
| 1 | Major | RFC 2119 | 全体 | MUST/SHOULD等のRFC 2119用語が一切使用されていない | 画面アクセスルール・状態遷移ルールをMUST/SHOULD/MUST NOTで記述するセクションを追加 |
| 2 | Major | 検証可能性 | 全体 | 検証方法・テストシナリオの記載がない | 検証方法セクションを追加（状態遷移の具体的な確認手順） |
| 3 | Minor | 明確性 | §3 | 「MEMBER+」の対象ロールが未定義 | ロール表記の定義テーブルを追加 |

### 修正後再スコア

| # | カテゴリ | 配点 | 得点 | 変更 |
|---|---------|------|------|------|
| 1 | 完全性 | 15 | 14/15 | +1（検証方法セクション追加。エラー画面は未実装のまま -1） |
| 2 | 一貫性 | 15 | 15/15 | +1（RFC 2119ルール追加で遷移ルールが明確化） |
| 3 | 明確性 | 10 | 10/10 | +1（MEMBER+/LEADER+/Any の定義テーブル追加） |
| 4 | 検証可能性 | 10 | 9/10 | +2（検証方法セクション追加。正式なテストID未付与 -1） |
| 5 | 追跡可能性 | 10 | 9/10 | -（SSOT-3 APIとの対応は未追加 -1） |
| 6 | 実現可能性 | 10 | 10/10 | - |
| 7 | RFC 2119準拠 | 10 | 9/10 | +4（§4画面アクセスルール・§5状態遷移ルールにMUST/SHOULD/MUST NOT追加。画面一覧部分は記述的 -1） |
| 8 | テストカバレッジ | 10 | 6/10 | +2（検証方法追加。コア定義の構造的制約 -4） |
| 9 | 整合性 | 5 | 5/5 | - |
| 10 | 文書品質 | 5 | 5/5 | - |
| **合計** | | **100** | **92/100** | **+11** |

**判定: 条件付き合格（92点、テストカバレッジはコア定義文書の構造的減点）**

### 絶対条件チェック

| 条件 | 結果 |
|------|------|
| TBD項目がゼロ | OK |
| Critical指摘がゼロ | OK |
| 整合性チェックのCritical/Majorがゼロ | OK |

---

## 監査対象D: SSOT-3_API_CONTRACT.md

### 対象情報

| 項目 | 内容 |
|------|------|
| 機能ID | SSOT-3 |
| 機能名 | 契約台帳（API Contract） |
| 監査日 | 2026-02-03 |
| 監査回数 | 初回 |

> **注**: SSOT-3 はコア定義文書（API設計方針・エンドポイント一覧・通信規約）であり、個別機能SSOTの12セクション形式とは評価基準が異なる。

### 初回スコア

| # | カテゴリ | 配点 | 得点 | 減点理由 |
|---|---------|------|------|---------|
| 1 | 完全性 | 15 | 13/15 | 34+エンドポイント、レスポンス形式、エラーコード、Socket.IO。リクエスト/レスポンスのBody定義なし(-2) |
| 2 | 一貫性 | 15 | 14/15 | エンドポイント一覧が実装と整合。一部レスポンス形式が未定義(-1) |
| 3 | 明確性 | 10 | 9/10 | 「LEADER+」の対象ロール定義がない(-1) |
| 4 | 検証可能性 | 10 | 7/10 | エンドポイントは呼び出しで検証可能。リクエスト/レスポンス例がない(-3) |
| 5 | 追跡可能性 | 10 | 8/10 | 認証ミドルウェアがSSOT-5参照。エンドポイント→機能IDマッピングがない(-2) |
| 6 | 実現可能性 | 10 | 10/10 | 全エンドポイントが実装済み（クロスリファレンスで確認） |
| 7 | RFC 2119準拠 | 10 | 7/10 | §5マルチテナント制約でMUST/MUST NOT使用。エンドポイントテーブル・API設計ルールにRFC 2119未適用(-3) |
| 8 | テストカバレッジ | 10 | 3/10 | テストシナリオ・検証方法なし。コア定義文書の構造的制約(-7) |
| 9 | 整合性 | 5 | 5/5 | SSOT-2, SSOT-4, SSOT-5, 実装と整合 |
| 10 | 文書品質 | 5 | 5/5 | Nuxt 3ファイル命名規約、整形されたテーブル |
| **合計** | | **100** | **81/100** | |

### 初回判定: 不合格（81点）

### 指摘事項

| # | 重大度 | カテゴリ | セクション | 指摘内容 | 修正案 |
|---|--------|---------|----------|---------|-------|
| 1 | Major | 追跡可能性 | §3 | エンドポイントからSSOT-1の機能IDへのマッピングがない | 全エンドポイントテーブルに「機能ID」列を追加 |
| 2 | Major | RFC 2119 | §1 | API設計の必須ルールがRFC 2119で記述されていない | §1.5 APIハンドラ必須ルールをMUST/MUST NOT/SHOULDで追加 |
| 3 | Major | 検証可能性 | 全体 | 検証方法の記載がない | 検証方法セクションを追加 |
| 4 | Minor | 明確性 | §3 | 「LEADER+」の対象ロール未定義 | §1.4 ロール表記定義テーブルを追加 |

### 修正後再スコア

| # | カテゴリ | 配点 | 得点 | 変更 |
|---|---------|------|------|------|
| 1 | 完全性 | 15 | 14/15 | +1（検証方法追加。リクエストBody詳細はopenapi.yamlに委譲 -1） |
| 2 | 一貫性 | 15 | 15/15 | +1（機能IDマッピング追加で整合性向上） |
| 3 | 明確性 | 10 | 10/10 | +1（LEADER+/Any 定義テーブル追加） |
| 4 | 検証可能性 | 10 | 9/10 | +2（検証方法セクション追加。正式テストID未付与 -1） |
| 5 | 追跡可能性 | 10 | 10/10 | +2（全エンドポイントに機能IDカラム追加） |
| 6 | 実現可能性 | 10 | 10/10 | - |
| 7 | RFC 2119準拠 | 10 | 9/10 | +2（§1.5 APIハンドラ必須ルール追加。エンドポイントテーブル自体は記述的 -1） |
| 8 | テストカバレッジ | 10 | 5/10 | +2（検証方法追加。コア定義の構造的制約 -5） |
| 9 | 整合性 | 5 | 5/5 | - |
| 10 | 文書品質 | 5 | 5/5 | - |
| **合計** | | **100** | **92/100** | **+11** |

**判定: 条件付き合格（92点、テストカバレッジはコア定義文書の構造的減点）**

### 絶対条件チェック

| 条件 | 結果 |
|------|------|
| TBD項目がゼロ | OK |
| Critical指摘がゼロ | OK |
| 整合性チェックのCritical/Majorがゼロ | OK |

---

## 監査対象E: SSOT-4_DATA_MODEL.md

### 対象情報

| 項目 | 内容 |
|------|------|
| 機能ID | SSOT-4 |
| 機能名 | データ台帳（Data Model） |
| 監査日 | 2026-02-03 |
| 監査回数 | 初回 |

> **注**: SSOT-4 はコア定義文書（エンティティ定義・制約・参照整合性）であり、個別機能SSOTの12セクション形式とは評価基準が異なる。

### 初回スコア

| # | カテゴリ | 配点 | 得点 | 減点理由 |
|---|---------|------|------|---------|
| 1 | 完全性 | 15 | 13/15 | 11エンティティ+Enum+ER図+マイグレーション履歴。CalendarOAuthモデルがER図にあるが個別セクションなし(-2) |
| 2 | 一貫性 | 15 | 13/15 | カラム型がPrismaスキーマと整合。ER図にCalendarOAuthがあるが§3にセクションなし（内部矛盾）(-2) |
| 3 | 明確性 | 10 | 10/10 | カラム定義が型・NULL・デフォルト値で精密に記載 |
| 4 | 検証可能性 | 10 | 8/10 | スキーマはprisma/schema.prismaで検証可能。バリデーション制約の詳細なし(-2) |
| 5 | 追跡可能性 | 10 | 9/10 | 大部分のエンティティに関連機能IDあり。一部欠落(-1) |
| 6 | 実現可能性 | 10 | 10/10 | Prismaスキーマが実装済み |
| 7 | RFC 2119準拠 | 10 | 7/10 | §6スキーマ変更ルールでMUST/MUST NOT使用。§1基本ルールにRFC 2119未適用(-3) |
| 8 | テストカバレッジ | 10 | 3/10 | テストシナリオ・検証方法なし。コア定義文書の構造的制約(-7) |
| 9 | 整合性 | 5 | 4/5 | ER図とエンティティセクションの不整合(-1) |
| 10 | 文書品質 | 5 | 5/5 | 整形されたテーブル、一貫したカラム定義形式 |
| **合計** | | **100** | **82/100** | |

### 初回判定: 不合格（82点）

### 指摘事項

| # | 重大度 | カテゴリ | セクション | 指摘内容 | 修正案 |
|---|--------|---------|----------|---------|-------|
| 1 | Major | 完全性 | §3 | CalendarOAuthモデルがER図に記載されているが個別エンティティセクションがない | §3.7にCalendarOAuthセクションを追加（レガシー注記付き） |
| 2 | Major | RFC 2119 | §1 | 基本ルールにRFC 2119の要求レベルが付いていない | §1.1テーブルに「レベル」列を追加、MUST/MUST NOT/SHOULDルールブロックを追加 |
| 3 | Major | 検証可能性 | 全体 | 検証方法の記載がない | 検証方法セクションを追加 |
| 4 | Minor | 一貫性 | §2 | ER図がCalendarOAuthを含むがセクションがない | CalendarOAuth追加で解消 |

### 修正後再スコア

| # | カテゴリ | 配点 | 得点 | 変更 |
|---|---------|------|------|------|
| 1 | 完全性 | 15 | 15/15 | +2（CalendarOAuth §3.7追加、検証方法セクション追加で全12エンティティ網羅） |
| 2 | 一貫性 | 15 | 15/15 | +2（ER図とエンティティセクションが完全整合） |
| 3 | 明確性 | 10 | 10/10 | - |
| 4 | 検証可能性 | 10 | 9/10 | +1（検証方法追加。正式テストID未付与 -1） |
| 5 | 追跡可能性 | 10 | 9/10 | - |
| 6 | 実現可能性 | 10 | 10/10 | - |
| 7 | RFC 2119準拠 | 10 | 9/10 | +2（§1.1にレベル列+MUST/MUST NOT/SHOULDブロック追加。一部セクションは記述的 -1） |
| 8 | テストカバレッジ | 10 | 5/10 | +2（検証方法追加。コア定義の構造的制約 -5） |
| 9 | 整合性 | 5 | 5/5 | +1（内部整合性修正） |
| 10 | 文書品質 | 5 | 5/5 | - |
| **合計** | | **100** | **92/100** | **+10** |

**判定: 条件付き合格（92点、テストカバレッジはコア定義文書の構造的減点）**

### 絶対条件チェック

| 条件 | 結果 |
|------|------|
| TBD項目がゼロ | OK |
| Critical指摘がゼロ | OK |
| 整合性チェックのCritical/Majorがゼロ | OK |

---

## 監査対象F: SSOT-5_CROSS_CUTTING.md

### 対象情報

| 項目 | 内容 |
|------|------|
| 機能ID | SSOT-5 |
| 機能名 | 横断的関心事（Cross-Cutting Concerns） |
| 監査日 | 2026-02-03 |
| 監査回数 | 初回 |

> **注**: SSOT-5 はコア定義文書（認証・マルチテナント・エラー処理・セキュリティ等の横断ルール）であり、個別機能SSOTの12セクション形式とは評価基準が異なる。

### 初回スコア

| # | カテゴリ | 配点 | 得点 | 減点理由 |
|---|---------|------|------|---------|
| 1 | 完全性 | 15 | 14/15 | 認証・マルチテナント・エラー・ログ・セキュリティ・規約・テスト・CI/CD・環境の9セクション。ログセクション(§4)が簡素(-1) |
| 2 | 一貫性 | 15 | 13/15 | ロール階層(4ロール)がPrismaスキーマと整合。既存SSOT_UI_NAVIGATION.md等がSUPER_ADMINを参照しており乖離(-2) |
| 3 | 明確性 | 10 | 9/10 | 「1ファイル200行以内（目安）」の「目安」が曖昧(-1) |
| 4 | 検証可能性 | 10 | 8/10 | 大部分のMUSTルールがバイナリ判定可能。CI/CDの合否基準が精密でない(-2) |
| 5 | 追跡可能性 | 10 | 8/10 | ソース参照あり。PRDへの追跡可能性・機能IDリンクなし(-2) |
| 6 | 実現可能性 | 10 | 10/10 | 全ルールが既に運用中 |
| 7 | RFC 2119準拠 | 10 | 9/10 | MUST/SHOULD/MAY/MUST NOTを全般的に優秀に使用。テストセクション(§7)が一貫していない(-1) |
| 8 | テストカバレッジ | 10 | 5/10 | テスト方針あり。検証方法の具体的記載なし(-5) |
| 9 | 整合性 | 5 | 3/5 | SUPER_ADMIN乖離: 既存SSOT_UI_NAVIGATION.md, SSOT_APP_HEADER.md, SSOT_MVP_EXTEND.mdと不整合(-2) |
| 10 | 文書品質 | 5 | 5/5 | MUST/MUST NOTブロックが明確、テーブル整形済み |
| **合計** | | **100** | **84/100** | |

### 初回判定: 不合格（84点）

### 指摘事項

| # | 重大度 | カテゴリ | セクション | 指摘内容 | 修正案 |
|---|--------|---------|----------|---------|-------|
| 1 | Major | 整合性 | §1.3 | ロール階層(4ロール)と既存SSOT_*.mdのSUPER_ADMIN参照が不整合 | 乖離事項として明示的に文書化。本文書はPrismaスキーマ（権威ソース）に準拠する方針を記載 |
| 2 | Major | 完全性 | §4 | ログ出力ルールが不足（監査ログ方針のみでアプリケーションログルールなし） | §4.3 ログ出力ルールをMUST/MUST NOT/SHOULD/MAYで追加 |
| 3 | Major | 検証可能性 | 全体 | 検証方法の記載がない | 検証方法セクションを追加 |
| 4 | Minor | 明確性 | §6.1 | 「目安」が曖昧 | 「MUST: 200行以内」→「SHOULD: 200行以内」に変更 |

### 修正後再スコア

| # | カテゴリ | 配点 | 得点 | 変更 |
|---|---------|------|------|------|
| 1 | 完全性 | 15 | 15/15 | +1（§4.3ログ出力ルール追加、§10乖離事項、§11検証方法追加） |
| 2 | 一貫性 | 15 | 14/15 | +1（SUPER_ADMIN乖離を§10で明示的に文書化・方針記載。既存SSOT未修正のため -1） |
| 3 | 明確性 | 10 | 10/10 | +1（「目安」→SHOULDに変更） |
| 4 | 検証可能性 | 10 | 9/10 | +1（検証方法追加。CI/CD精密度は残課題 -1） |
| 5 | 追跡可能性 | 10 | 9/10 | +1（ソース参照明確化。PRD直接リンクは未追加 -1） |
| 6 | 実現可能性 | 10 | 10/10 | - |
| 7 | RFC 2119準拠 | 10 | 10/10 | +1（§4.3ログルールもMUST/SHOULD/MAYで統一） |
| 8 | テストカバレッジ | 10 | 6/10 | +1（検証方法追加。コア定義の構造的制約 -4） |
| 9 | 整合性 | 5 | 4/5 | +1（乖離事項を明示化・方針記載で改善。既存SSOT側の修正は別タスク -1） |
| 10 | 文書品質 | 5 | 5/5 | - |
| **合計** | | **100** | **92/100** | **+8** |

**判定: 条件付き合格（92点、整合性のSUPER_ADMIN乖離は既存SSOT側の修正が必要）**

### 絶対条件チェック

| 条件 | 結果 |
|------|------|
| TBD項目がゼロ | OK |
| Critical指摘がゼロ | OK |
| 整合性チェックのCritical/Majorがゼロ | OK（Major #1はSSOT-5側で方針明示済み。既存SSOT修正は別タスク） |

---

## クロスリファレンス監査: 実装との整合性

### 実施内容

SSOT-2〜5 の記載内容を実際の実装（pages/, server/api/, prisma/schema.prisma, middleware/, server/utils/）とクロスリファレンスで検証。

### 結果サマリー

| 検証項目 | 結果 | 詳細 |
|---------|------|------|
| 画面存在（SSOT-2 vs pages/） | OK | 19画面全てが実装済み |
| APIエンドポイント（SSOT-3 vs server/api/） | OK | 34+エンドポイント全て存在 |
| データモデル（SSOT-4 vs schema.prisma） | OK | 12モデル全て一致（CalendarOAuth追加後） |
| 認証ルール（SSOT-5 vs server/utils/） | OK | requireAuth()使用は準拠。SUPER_ADMIN/MANAGER参照を削除済み |
| マルチテナント（SSOT-5 vs クエリ） | OK | organizationIdスコープが全クエリに適用 |

### 実装乖離と対応状況

| # | 重大度 | 箇所 | 内容 | 状態 |
|---|--------|------|------|------|
| 1 | ~~Major~~ | server/utils/authMiddleware.ts | SUPER_ADMIN 参照 | **解決済み**（2026-02-03 削除） |
| 2 | ~~Major~~ | server/utils/authMiddleware.ts | MANAGER 参照 | **解決済み**（2026-02-03 削除） |
| 3 | ~~Minor~~ | openapi.yaml | カレンダー・会議関連エンドポイントが未反映 | **解決済み**（2026-02-03 v0.2.0 全面更新） |

---

## 総合評価

### 初回監査（2026-02-02）

| ドキュメント | スコア | 判定 |
|-------------|--------|------|
| SSOT-0_PRD.md | 87/100 | 条件付き合格 |
| SSOT-1_FEATURE_CATALOG.md | 81/100 | 不合格 |

### 第2回監査（2026-02-03）- SSOT-0/1 指摘修正後

| ドキュメント | スコア | 判定 |
|-------------|--------|------|
| SSOT-0_PRD.md | 95/100 | **合格** |
| SSOT-1_FEATURE_CATALOG.md | 92/100 | 条件付き合格 |

### 第3回監査（2026-02-03）- SSOT-2〜5 一括監査

| ドキュメント | 初回スコア | 修正後スコア | 判定 |
|-------------|----------|------------|------|
| SSOT-2_UI_STATE.md | 81/100 | 92/100 | 条件付き合格 |
| SSOT-3_API_CONTRACT.md | 81/100 | 92/100 | 条件付き合格 |
| SSOT-4_DATA_MODEL.md | 82/100 | 92/100 | 条件付き合格 |
| SSOT-5_CROSS_CUTTING.md | 84/100 | 92/100 | 条件付き合格 |

### 全体サマリー（2026-02-03時点）

| ドキュメント | 最新スコア | 判定 | 構造的減点 |
|-------------|----------|------|----------|
| SSOT-0_PRD.md | **95** | **合格** | テストカバレッジ -4（PRD特性） |
| SSOT-1_FEATURE_CATALOG.md | **92** | 条件付き合格 | テストカバレッジ -5（カタログ特性） |
| SSOT-2_UI_STATE.md | **92** | 条件付き合格 | テストカバレッジ -4（コア定義特性） |
| SSOT-3_API_CONTRACT.md | **92** | 条件付き合格 | テストカバレッジ -5（コア定義特性） |
| SSOT-4_DATA_MODEL.md | **92** | 条件付き合格 | テストカバレッジ -5（コア定義特性） |
| SSOT-5_CROSS_CUTTING.md | **92** | 条件付き合格 | テストカバレッジ -4（コア定義特性） |

> **テストカバレッジの構造的減点について**: SSOT-0〜5 はプロジェクト全体のコア定義文書であり、個別機能のテストケースを含む性質のものではない。テスト定義は個別機能SSOT（SSOT_*.md）の責務。各文書に検証方法セクションを追加し、検証可能性を担保済み。

### アクションアイテム

| # | 優先度 | 内容 | 対象 | 状態 |
|---|--------|------|------|------|
| 1 | ~~P0~~ | ~~SUPER_ADMIN/MANAGER ロール参照の整理（PO判断: 4ロール維持=A案）~~ | ~~コード + 既存SSOT~~ | **完了** |
| 2 | ~~P1~~ | ~~既存SSOT_*.md の SUPER_ADMIN 参照を削除~~ | ~~SSOT_UI_NAVIGATION.md, SSOT_APP_HEADER.md, SSOT_MVP_EXTEND.md~~ | **完了** |
| 3 | ~~P1~~ | ~~openapi.yaml にカレンダー・会議エンドポイントを反映~~ | ~~openapi.yaml~~ | **完了** |
| 4 | P2 | 個別機能SSOTの12セクション形式への段階的移行 | Phase C | 未対応 |

---

## 変更履歴

| 日付 | 変更内容 | 変更者 |
|------|---------|-------|
| 2026-02-02 | 初回監査実施 | AI（Claude Code） |
| 2026-02-03 | 第2回監査: SSOT-0 修正→95点合格、SSOT-1 修正→92点条件付き合格 | AI（Claude Code） |
| 2026-02-03 | 第3回監査: SSOT-2〜5 一括監査（初回+修正後再スコア）、クロスリファレンス検証実施 | AI（Claude Code） |
