# 02_ROLES_AND_RESPONSIBILITIES.md - 役割と責任

> 各ロールの責任範囲とAIとの協働方法を定義

---

## ロール一覧

| ロール | 略称 | 主な責任 |
|-------|------|---------|
| プロダクトオーナー | PO | WHAT（何を作るか）の決定 |
| テックリード | TL | HOW（どう作るか）の決定 |
| 設計者 | Designer | 機能仕様の作成 |
| 開発者 | Dev | 実装・テスト |
| AI（Claude Code等） | AI | 指示に基づく実装・テスト |
| レビュアー | Reviewer | 品質担保 |

---

## 各ロールの詳細

### プロダクトオーナー（PO）

**責任範囲**:
- プロダクトビジョンの定義
- 要件の優先順位付け
- ステークホルダーとの調整
- 受入条件の最終承認

**作成するドキュメント**:
- `ssot/SSOT-0_PRD.md`
- `ssot/SSOT-1_FEATURE_CATALOG.md`（優先度部分）

**承認するゲート**:
- Gate 0: 要件定義完了
- Gate 4: 受入テスト承認

---

### テックリード（TL）

**責任範囲**:
- 技術方針の決定
- アーキテクチャ設計
- 技術的な制約の管理
- コード品質の担保

**作成するドキュメント**:
- `ssot/SSOT-3_API_CONTRACT.md`
- `ssot/SSOT-4_DATA_MODEL.md`
- `ssot/SSOT-5_CROSS_CUTTING.md`
- `adr/*.md`

**承認するゲート**:
- Gate 2: 技術設計完了
- Gate 4: コードレビュー承認

---

### 設計者（Designer）

**責任範囲**:
- 機能仕様の詳細化
- UI/UXの設計
- エッジケースの洗い出し
- 受入条件の定義

**作成するドキュメント**:
- `features/*.md`（機能別仕様）
- `ssot/SSOT-2_UI_STATE.md`

**承認するゲート**:
- Gate 1: 機能設計完了

---

### 開発者（Dev）

**責任範囲**:
- 仕様に基づく実装
- ユニットテスト作成
- コードレビュー対応
- バグ修正

**作成する成果物**:
- ソースコード
- テストコード
- マイグレーションファイル

---

### AI（Claude Code等）

**責任範囲**:
- 指示に基づく実装
- 仕様書の解釈と実装への反映
- テストコードの生成
- コードのリファクタリング

**AIに依頼できること**:
- L3レベルの仕様書に基づく実装
- テストコードの生成
- コードレビュー指摘への対応
- ドキュメントの生成補助

**AIに依頼してはいけないこと**:
- 仕様が不明確な機能の実装
- 技術判断（ADRに記録すべきもの）
- 要件の優先順位付け
- セキュリティ要件の決定

---

### レビュアー（Reviewer）

**責任範囲**:
- コード品質の確認
- 仕様との整合性確認
- セキュリティ観点の確認
- 改善提案

**使用するドキュメント**:
- `checklists/REVIEW_CHECKLIST.md`
- `features/*.md`（仕様との照合）

---

## RACI マトリクス

| アクティビティ | PO | TL | Designer | Dev | AI | Reviewer |
|--------------|----|----|----------|-----|-----|----------|
| PRD作成 | **R/A** | C | C | I | - | - |
| 機能カタログ作成 | **R/A** | C | C | I | - | - |
| 機能仕様作成 | A | C | **R** | C | I | - |
| API設計 | I | **R/A** | C | C | - | - |
| データモデル設計 | I | **R/A** | C | C | - | - |
| 実装 | I | C | C | **R** | **R** | - |
| ユニットテスト作成 | I | C | - | **R** | **R** | - |
| コードレビュー | - | C | - | C | - | **R/A** |
| 受入テスト | **A** | - | **R** | C | - | - |
| リリース承認 | **A** | **R** | I | I | - | - |

**R**: Responsible（実行責任）
**A**: Accountable（説明責任）
**C**: Consulted（相談される）
**I**: Informed（情報を受ける）

---

## AIとの協働ルール

### 1. AIへの依頼前チェックリスト

```markdown
## AI実装依頼前チェック

- [ ] features/*.md がL3レベルに達している
- [ ] 受入条件が明確で検証可能
- [ ] エッジケースが網羅されている
- [ ] 参照すべきSSOTが特定されている
- [ ] 実装スコープが明確
```

### 2. AIへの指示テンプレート

```markdown
## 実装依頼

### 基本情報
- 機能ID: {FEATURE_ID}
- 機能名: {機能名}

### 参照ドキュメント（この順序で読むこと）
1. docs/features/{FEATURE_ID}_xxx.md
2. docs/ssot/SSOT-5_CROSS_CUTTING.md
3. docs/ssot/SSOT-3_API_CONTRACT.md
4. docs/ssot/SSOT-4_DATA_MODEL.md

### 実装スコープ
- [ ] フロントエンド
- [ ] バックエンド
- [ ] データベース
- [ ] テスト

### 注意事項
- {特記事項があれば記載}
```

### 3. AIの出力に対する人間のレビュー観点

```markdown
## AIコードレビュー観点

- [ ] 仕様書の受入条件を全て満たしているか
- [ ] エッジケースが実装されているか
- [ ] エラーハンドリングがSSOT-5に準拠しているか
- [ ] セキュリティ要件を満たしているか
- [ ] テストが十分か（カバレッジ、境界値）
- [ ] コーディング規約に準拠しているか
```

---

## コミュニケーションフロー

### 仕様に関する質問

```
開発者/AI → 設計者 → (必要に応じて) → PO
```

### 技術に関する質問

```
開発者/AI → TL
```

### 仕様変更要求

```
発見者 → 設計者 → PO（承認）→ SSOT更新 → 関係者に通知
```

### AIからの質問・確認

```
AI: 「仕様書に{X}の記載がありません。確認が必要です」
↓
開発者: 設計者に確認
↓
設計者: 仕様を明確化してfeatures/*.mdを更新
↓
開発者: 更新された仕様をAIに再度指示
```

**重要**: AIが曖昧な仕様で実装を進めることを許可しない

---

## 小規模チームでのロール兼任

| チーム規模 | 推奨構成 |
|-----------|---------|
| 1人 | 全ロール兼任（ドキュメントは省略しない） |
| 2人 | PO+設計者 / TL+Dev+AI管理 |
| 3-5人 | PO / TL+設計者 / Dev（AI活用） |
| 5人以上 | フルロール分離 |

**注意**: ロールを兼任しても、ドキュメントの省略は禁止。AIが参照するため。

---

## 次に読むべきドキュメント

1. **[features/_TEMPLATE.md](./features/_TEMPLATE.md)** - 機能仕様テンプレート
2. **[PHASE_GATE_CHECKLIST.md](./checklists/PHASE_GATE_CHECKLIST.md)** - 全ゲート条件一覧
