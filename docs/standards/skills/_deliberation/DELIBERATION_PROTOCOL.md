# Deliberation Protocol（多視点対話プロトコル）

## 目的

1人の専門家の知識と経験だけに左右されない、
**複数の視点を統合した成果物**を生成するための対話プロトコル。

## 原則

```
「正しい答え」を最初から出そうとするのではなく、
「複数の専門家が議論して磨き上げた答え」を出す。

1人の専門家 → バイアスがかかる、盲点が生まれる
複数の専門家 → 異なる視点で盲点を補い合い、精度が上がる
```

## プロトコル構造

### Phase 1: Draft（仮案提示）

主担当の専門家が仮案を出す。この時点では完成度 60% で OK。

```
「まず私（[主担当の役割]）の視点から仮案を出します。
 この後、他の専門家の視点からレビューします。」
```

### Phase 2: Challenge Round（異なる視点からの挑戦）

3つの異なる視点から仮案を批判的にレビューする。
各視点は「その分野のプロならどう見るか」を忠実に再現する。

```
--- [視点A の専門家名] の意見 ---
「[仮案の具体的な箇所] について、[専門分野] の観点から
 [具体的な懸念・指摘・改善案] です。
 理由: [根拠]」

--- [視点B の専門家名] の意見 ---
「...」

--- [視点C の専門家名] の意見 ---
「...」
```

### Phase 3: Synthesis（統合）

全ての指摘を検討し、仮案を改訂する。

```
「各専門家の意見を統合します:

 採用する指摘:
 - [視点A の指摘内容] → [どう反映するか]
 - [視点B の指摘内容] → [どう反映するか]

 保留する指摘:
 - [視点C の指摘内容] → [理由: ユーザー判断が必要]

 改訂版を以下に示します。」
```

### Phase 4: User Decision（ユーザー判断）

統合結果をユーザーに提示し、承認を得る。

```
「複数の視点で検討した結果をまとめました。

 💡 議論のハイライト:
 - [最も重要だった論点]
 - [意見が分かれたポイント]

 保留中の判断:
 - [ユーザーの意思決定が必要な項目]

 この内容で進めてよいですか？」
```

## フェーズ別の専門家パネル

### Discovery フェーズ

| 視点 | 役割 | 問いかけ |
|------|------|---------|
| 起業家 | 市場機会の評価 | 「この課題に本当にお金を払う人がいるか？」 |
| ユーザー代弁者 | ユーザー視点の検証 | 「本当にそれが一番痛い課題か？代替手段は？」 |
| 技術アドバイザー | 実現可能性の早期チェック | 「技術的に実現可能か？コスト感は？」 |

### Business Design フェーズ

| 視点 | 役割 | 問いかけ |
|------|------|---------|
| マーケットアナリスト | 市場分析 | 「市場規模は？成長性は？参入障壁は？」 |
| ファイナンシャルアドバイザー | 収益性検証 | 「この単価で LTV は成り立つ？」 |
| 競合アナリスト | 差別化検証 | 「競合との違いは本当に優位性か？模倣されないか？」 |

### Product Design フェーズ

| 視点 | 役割 | 問いかけ |
|------|------|---------|
| UXデザイナー | ユーザー体験 | 「ユーザーの操作フローは直感的か？」 |
| エンジニア | 技術的実現性 | 「この機能セットで MVP として妥当か？」 |
| QAエンジニア | テスト可能性 | 「この要件は検証可能か？曖昧な表現はないか？」 |

### Feature Spec フェーズ

| 視点 | 役割 | 問いかけ |
|------|------|---------|
| セキュリティエンジニア | 脆弱性チェック | 「この入力は悪用されないか？認証は十分か？」 |
| パフォーマンスエンジニア | 性能検証 | 「大量データでも動作するか？N+1 は？」 |
| フロントエンドエンジニア | UI 実現性 | 「この画面遷移は実装可能か？状態管理は？」 |

### Technical Design フェーズ

| 視点 | 役割 | 問いかけ |
|------|------|---------|
| インフラエンジニア | 運用性 | 「スケーラビリティは？障害時の復旧は？」 |
| セキュリティアーキテクト | セキュリティ設計 | 「この構成のアタックサーフェスは？」 |
| DBA | データ設計 | 「このスキーマで将来のクエリに対応できるか？」 |

### Implementation フェーズ

| 視点 | 役割 | 問いかけ |
|------|------|---------|
| シニアエンジニア | コード品質 | 「この設計パターンは適切か？技術的負債は？」 |
| テストエンジニア | テスト設計 | 「エッジケースは網羅されているか？」 |
| コードレビュアー (Role B) | 仕様準拠 | 「SSOT と一致しているか？セキュリティは？」 |

## Deliberation の適用タイミング

全ての判断に Deliberation を適用すると冗長になるため、
**重要度に応じて使い分ける**:

```
🔴 Full Deliberation（3視点フル対話）:
  - P0 機能の SSOT 最終版
  - 技術スタック選定
  - API 契約の確定
  - セキュリティ設計

🟡 Quick Review（1視点の簡易チェック）:
  - P1/P2 機能の仕様
  - DETAIL 層の決定
  - UI の微調整

🟢 Skip（対話なし）:
  - テンプレートの機械的適用
  - 共通機能のそのまま採用
  - 明確な正解が1つしかない判断
```

## 出力フォーマット

```
┌─────────────────────────────────────────────────┐
│  🔴 DELIBERATION: [対象の名前]                    │
├─────────────────────────────────────────────────┤
│                                                 │
│  📝 Draft by [主担当]:                           │
│    [仮案の要約]                                   │
│                                                 │
│  💬 Challenge Round:                            │
│                                                 │
│  👤 [視点A]: [指摘内容]                           │
│  👤 [視点B]: [指摘内容]                           │
│  👤 [視点C]: [指摘内容]                           │
│                                                 │
│  ✅ Synthesis:                                  │
│    採用: [反映した指摘]                            │
│    保留: [ユーザー判断待ち]                         │
│                                                 │
│  📋 Final Output:                               │
│    [統合された成果物]                              │
│                                                 │
└─────────────────────────────────────────────────┘
```
