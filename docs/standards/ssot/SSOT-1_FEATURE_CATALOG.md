# SSOT-1: 機能台帳（Feature Catalog）

> 全機能の母艦 - 「棚を先に作り、要/不要を切る」運用

---

## 使い方

1. **棚卸し**: 下記の標準機能カテゴリを見て、必要な機能にチェック
2. **ID付与**: 実装する機能には一意のIDを振る
3. **受入条件**: 各機能に3〜7個の受入条件を設定
4. **状態管理**: 設計中/実装中/完了/スコープ外を明示

---

## 機能一覧サマリー

| カテゴリ | 機能数 | 対象 | スコープ外 |
|---------|-------|------|----------|
| 1. 認証・認可 | /12 | | |
| 2. アカウント | /6 | | |
| 3. 権限・ロール | /5 | | |
| 4. ナビゲーション | /6 | | |
| 5. 検索・一覧 | /5 | | |
| 6. CRUD共通 | /7 | | |
| 7. 通知 | /5 | | |
| 8. 監査・ログ | /4 | | |
| 9. エラー・例外 | /6 | | |
| 10. セキュリティ | /7 | | |
| 11. 運用・管理 | /6 | | |
| 12. AI特有 | /8 | | |
| **合計** | **/77** | | |

---

## 1. 認証・認可（AUTH）

| ID | 機能 | 必要 | 優先度 | 状態 | 備考 |
|----|------|------|-------|------|------|
| AUTH-001 | メール/パスワードログイン | ☐ | | | |
| AUTH-002 | OAuth（Google） | ☐ | | | |
| AUTH-003 | OAuth（GitHub） | ☐ | | | |
| AUTH-004 | OAuth（その他: ___） | ☐ | | | |
| AUTH-005 | ログアウト | ☐ | | | |
| AUTH-006 | パスワードリセット | ☐ | | | |
| AUTH-007 | メール認証（サインアップ時） | ☐ | | | |
| AUTH-008 | 多要素認証（MFA/2FA） | ☐ | | | |
| AUTH-009 | セッション管理（有効期限） | ☐ | | | |
| AUTH-010 | セッション自動更新（リフレッシュトークン） | ☐ | | | |
| AUTH-011 | 同時ログイン制御 | ☐ | | | |
| AUTH-012 | ログイン履歴・デバイス管理 | ☐ | | | |

### AUTH-001: メール/パスワードログイン 受入条件

```
- [ ] AC1: 正しいメール/パスワードでログイン成功
- [ ] AC2: 不正なパスワードで適切なエラーメッセージ
- [ ] AC3: 存在しないメールで適切なエラーメッセージ（情報漏洩防止）
- [ ] AC4: ログイン成功後、元のページまたはダッシュボードへ遷移
- [ ] AC5: ログイン失敗N回でアカウントロック（任意）
```

---

## 2. アカウント（ACCT）

| ID | 機能 | 必要 | 優先度 | 状態 | 備考 |
|----|------|------|-------|------|------|
| ACCT-001 | ユーザー登録（サインアップ） | ☐ | | | |
| ACCT-002 | プロフィール表示 | ☐ | | | |
| ACCT-003 | プロフィール編集 | ☐ | | | |
| ACCT-004 | メールアドレス変更 | ☐ | | | |
| ACCT-005 | パスワード変更 | ☐ | | | |
| ACCT-006 | アカウント削除（退会） | ☐ | | | |

---

## 3. 権限・ロール（ROLE）

| ID | 機能 | 必要 | 優先度 | 状態 | 備考 |
|----|------|------|-------|------|------|
| ROLE-001 | ロール定義（Admin/User/Guest等） | ☐ | | | |
| ROLE-002 | ロールベースアクセス制御（RBAC） | ☐ | | | |
| ROLE-003 | 権限チェック（フロントエンド） | ☐ | | | |
| ROLE-004 | 権限チェック（バックエンド） | ☐ | | | |
| ROLE-005 | 管理者によるロール変更 | ☐ | | | |

---

## 4. ナビゲーション（NAV）

| ID | 機能 | 必要 | 優先度 | 状態 | 備考 |
|----|------|------|-------|------|------|
| NAV-001 | ヘッダー | ☐ | | | |
| NAV-002 | サイドバー | ☐ | | | |
| NAV-003 | フッター | ☐ | | | |
| NAV-004 | パンくずリスト | ☐ | | | |
| NAV-005 | ディープリンク対応 | ☐ | | | |
| NAV-006 | モバイルナビゲーション | ☐ | | | |

---

## 5. 検索・一覧（LIST）

| ID | 機能 | 必要 | 優先度 | 状態 | 備考 |
|----|------|------|-------|------|------|
| LIST-001 | ページネーション | ☐ | | | |
| LIST-002 | ソート | ☐ | | | |
| LIST-003 | フィルタ | ☐ | | | |
| LIST-004 | キーワード検索 | ☐ | | | |
| LIST-005 | 無限スクロール | ☐ | | | |

---

## 6. CRUD共通（CRUD）

| ID | 機能 | 必要 | 優先度 | 状態 | 備考 |
|----|------|------|-------|------|------|
| CRUD-001 | 新規作成（Create） | ☐ | | | |
| CRUD-002 | 詳細表示（Read） | ☐ | | | |
| CRUD-003 | 編集（Update） | ☐ | | | |
| CRUD-004 | 削除（Delete） | ☐ | | | |
| CRUD-005 | 下書き保存 | ☐ | | | |
| CRUD-006 | 一括操作（バルク） | ☐ | | | |
| CRUD-007 | インポート/エクスポート | ☐ | | | |

---

## 7. 通知（NOTIF）

| ID | 機能 | 必要 | 優先度 | 状態 | 備考 |
|----|------|------|-------|------|------|
| NOTIF-001 | メール通知 | ☐ | | | |
| NOTIF-002 | アプリ内通知（トースト） | ☐ | | | |
| NOTIF-003 | アプリ内通知（通知センター） | ☐ | | | |
| NOTIF-004 | プッシュ通知 | ☐ | | | |
| NOTIF-005 | 通知失敗時の再送 | ☐ | | | |

---

## 8. 監査・ログ（AUDIT）

| ID | 機能 | 必要 | 優先度 | 状態 | 備考 |
|----|------|------|-------|------|------|
| AUDIT-001 | 操作ログ（誰がいつ何をしたか） | ☐ | | | |
| AUDIT-002 | ログイン履歴 | ☐ | | | |
| AUDIT-003 | 変更履歴（データ版管理） | ☐ | | | |
| AUDIT-004 | ログ検索・フィルタ | ☐ | | | |

---

## 9. エラー・例外（ERR）

| ID | 機能 | 必要 | 優先度 | 状態 | 備考 |
|----|------|------|-------|------|------|
| ERR-001 | 404ページ | ☐ | | | |
| ERR-002 | 403ページ（権限エラー） | ☐ | | | |
| ERR-003 | 500ページ（サーバーエラー） | ☐ | | | |
| ERR-004 | ネットワークエラー処理 | ☐ | | | |
| ERR-005 | リトライ機構 | ☐ | | | |
| ERR-006 | サポート導線（エラー時） | ☐ | | | |

---

## 10. セキュリティ（SEC）

| ID | 機能 | 必要 | 優先度 | 状態 | 備考 |
|----|------|------|-------|------|------|
| SEC-001 | CSRF対策 | ☐ | | | |
| SEC-002 | CORS設定 | ☐ | | | |
| SEC-003 | レート制限 | ☐ | | | |
| SEC-004 | 入力バリデーション | ☐ | | | |
| SEC-005 | SQLインジェクション対策 | ☐ | | | |
| SEC-006 | XSS対策 | ☐ | | | |
| SEC-007 | HTTPSリダイレクト | ☐ | | | |

---

## 11. 運用・管理（OPS）

| ID | 機能 | 必要 | 優先度 | 状態 | 備考 |
|----|------|------|-------|------|------|
| OPS-001 | 管理画面 | ☐ | | | |
| OPS-002 | ユーザー管理（管理者向け） | ☐ | | | |
| OPS-003 | バックアップ/リストア | ☐ | | | |
| OPS-004 | データ移行ツール | ☐ | | | |
| OPS-005 | メトリクス/モニタリング | ☐ | | | |
| OPS-006 | ヘルスチェック | ☐ | | | |

---

## 12. AI特有（AI）

| ID | 機能 | 必要 | 優先度 | 状態 | 備考 |
|----|------|------|-------|------|------|
| AI-001 | プロンプト管理 | ☐ | | | |
| AI-002 | モデル設定（温度、max_tokens等） | ☐ | | | |
| AI-003 | AI応答のストリーミング | ☐ | | | |
| AI-004 | AI応答のキャッシュ | ☐ | | | |
| AI-005 | AI出力の評価/フィードバック | ☐ | | | |
| AI-006 | 再現性の確保（seed等） | ☐ | | | |
| AI-007 | AIログ（入出力記録） | ☐ | | | |
| AI-008 | PII対策（個人情報マスキング） | ☐ | | | |

---

## カスタム機能（CUSTOM）

プロジェクト固有の機能はここに追加：

| ID | 機能 | 必要 | 優先度 | 状態 | 受入条件数 |
|----|------|------|-------|------|----------|
| CUSTOM-001 | | ☐ | | | |
| CUSTOM-002 | | ☐ | | | |
| CUSTOM-003 | | ☐ | | | |

---

## 優先度定義

| 優先度 | 定義 | 目安 |
|-------|------|------|
| **P0** | 必須（これがないとリリース不可） | MVP |
| **P1** | 重要（早期に実装すべき） | MVP後すぐ |
| **P2** | あると良い | 余裕があれば |
| **P3** | 将来検討 | バックログ |

---

## 状態定義

| 状態 | 意味 |
|------|------|
| **Backlog** | 未着手 |
| **Designing** | 設計中 |
| **Ready** | 実装着手可能（DoR通過） |
| **In Progress** | 実装中 |
| **Review** | レビュー中 |
| **Done** | 完了 |
| **Out of Scope** | スコープ外（明示的に対象外） |

---

## 変更履歴

| 日付 | 変更内容 | 変更者 |
|------|---------|-------|
| | 初版作成 | |
